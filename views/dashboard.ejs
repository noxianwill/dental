<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Dashboard - Dental Software</title>
      <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png">
	  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
      <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
	  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
	  <link rel="stylesheet" href="/css/style.css">
   </head>
   <body>
      <div class="sidebar">
         <h3 class="sidebar-heading">Dental Software</h3>
         <ul class="list-group list-group-flush">
            <li class="list-group-item"><a href="#" class="text-white" data-section="patient-management">Patient Management</a></li>
            <li class="list-group-item"><a href="#" class="text-white" data-section="clinical-documentation">Clinical Documentation</a></li>
            <li class="list-group-item"><a href="#" class="text-white" data-section="billing-invoicing">Billing and Invoicing</a></li>
            <li class="list-group-item"><a href="#" class="text-white" data-section="appointment-management">Appointment Management</a></li>
            <li class="list-group-item"><a href="#" class="text-white" data-section="patient-communication">Patient Communication</a></li>
            <li class="list-group-item"><a href="#" class="text-white" data-section="inventory-management">Inventory Management</a></li>
            <li class="list-group-item"><a href="#" class="text-white" data-section="analytics-reporting">Analytics and Reporting</a></li>
            <li class="list-group-item"><a href="#" class="text-white" data-section="compliance-security">Compliance and Security</a></li>
            <li class="list-group-item"><a href="#" class="text-white" data-section="workflow-automation">Workflow Automation</a></li>
            <li class="list-group-item"><a href="#" class="text-white" data-section="marketing-patient-acquisition">Marketing and Patient Acquisition</a></li>
            <li class="list-group-item"><a href="#" class="text-white" data-section="manage-users">Manage Users</a></li>
         </ul>
      </div>
      <div class="main-content">
      <header class="navbar navbar-expand-lg navbar-light bg-successnav header">
         <div class="container-fluid">
            <button type="button" id="sidebarCollapse" class="btn btn-outline-light">
            <i class="bi bi-list"></i>
            </button>
            <span class="navbar-brand mx-auto" style="color: white">Dashboard</span>
            <div class="dropdown">
				<a class="nav-link dropdown-toggle text-white" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">
					<%= name.split(' ').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ') %>
				</a>
               <ul class="dropdown-menu dropdown-menu-custom" aria-labelledby="dropdownMenuLink">
                  <li><a class="dropdown-item li-custom" href="#">Profile</a></li>
                  <li><a class="dropdown-item li-custom" href="#">Settings</a></li>
                  <li>
                     <hr class="dropdown-divider">
                  </li>
                  <li><a href="/logout" class="dropdown-item li-custom"><i class="bi bi-box-arrow-right"></i>Logout</a></li>
               </ul>
            </div>
         </div>
      </header>
      <main>
         <div id="content">
            <h1 class="h2" id="currentDateTime">Welcome to the Dashboard! Today's Date And Time:</h1>
            <div class="separator"></div>
         </div>
         <!-- Patient Management Section -->
         <div id="patient-management-section" style="display: none;">
            <!-- Button to open the modal -->
            <button type="button" id="addPatientBtn" class="btn btn-primary">Add Patient</button>
            <!-- Modal -->
            <div class="modal fade" id="addPatientModal" tabindex="-1" aria-labelledby="addPatientModalLabel" aria-hidden="true">
               <div class="modal-dialog">
                  <div class="modal-content">
                     <div class="modal-header">
                        <h5 class="modal-title" id="addPatientModalLabel">Add New Patient</h5>
                     </div>
                     <div class="modal-body">
                        <!-- Modal Form -->
                        <form id="addPatientForm">
                           <div class="mb-3">
                              <!-- Entries and inputs -->
                              <select id="patient_pronounce" name="patient_pronounce" class="form-control" required>
                                 <option value="">Sex</option>
                                 <option value="Mr.">Mr.</option>
                                 <option value="Ms.">Ms.</option>
								 <option value="Mrs.">Mrs.</option>
								 <option value="Dr.">Dr.</option>
                              </select>
                           </div>
                           <div class="mb-3">
                              <input type="text" id="first_name" name="first_name" class="form-control" required placeholder="First Name">
                           </div>
                           <div class="mb-3">
                              <input type="text" id="last_name" name="last_name" class="form-control" required placeholder="Last Name">
                           </div>
                           <div class="mb-3">
                              <input type="email" id="email" name="email" class="form-control" required placeholder="E-mail">
                           </div>
                           <div class="mb-3">
                              <input type="text" id="date_of_birth" name="date_of_birth" class="form-control" required placeholder="Birth date - Type DD/MM/YYYY" maxlength="10">
                           </div>
                           <div class="mb-3">
                              <input type="text" id="address" name="address" class="form-control" required placeholder="Address">
                           </div>
                           <div class="mb-3">
                              <input type="text" id="state" name="state" class="form-control" required placeholder="State">
                           </div>
                           <div class="mb-3">
                              <input type="text" id="city" name="city" class="form-control" required placeholder="City">
                           </div>
                           <div class="mb-3">
                              <input type="number" id="zip_code" name="zip_code" class="form-control" required min="1" max="99999" oninput="limitZipCode(this)" placeholder="Zip Code">
                           </div>
                           <div class="mb-3">
                              <input type="tel" id="phone_number" name="phone_number" class="form-control" required placeholder="Phone Number">
                           </div>
                           <div class="mb-3">
                              <input type="text" id="insurance" name="insurance" class="form-control" required placeholder="Insurance">
                           </div>
                           <div class="mb-3">
                              <input type="text" id="private_insurance" name="private_insurance" class="form-control" required placeholder="Private Insurance">
                           </div>
                           <div class="mb-3">
                              <input type="tel" id="insurance_personal_number" name="insurance_personal_number" class="form-control" placeholder="Insurance Number">
                           </div>
                           <div class="mb-3">
                              <input type="text" id="bill_address" name="bill_address" class="form-control" required placeholder="Billing Address">
                           </div>
                           <div class="mb-3">
                              <input type="text" id="cabin" name="cabin" class="form-control" placeholder="Cabin">
                           </div>
                           <button type="button" class="btn btn-secondary" aria-label="Close" data-bs-dismiss="modal">Close</button>
                           <button type="submit" class="btn btn-primary">Save Patient</button>
                        </form>
                     </div>
                  </div>
               </div>
            </div>
			
			<!-- Edit Patient Modal -->
			<div class="modal fade" id="editPatientModal" tabindex="-1" aria-labelledby="editPatientModalLabel" aria-hidden="true">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title" id="editPatientModalLabel">Edit Patient</h5>
							<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
						</div>
						<div class="modal-body">
							<form id="editPatientForm">
								                           <div class="mb-3">
                              <!-- Entries and inputs -->
                              <select id="edit_patient_pronounce" name="patient_pronounce" class="form-control" required>
                                 <option value="">Sex</option>
                                 <option value="Mr.">Mr.</option>
                                 <option value="Ms.">Ms.</option>
								 <option value="Mrs.">Mrs.</option>
								 <option value="Dr.">Dr.</option>
                              </select>
                           </div>
                           <div class="mb-3">
                              <input type="text" id="edit_first_name" name="first_name" class="form-control" required placeholder="First Name">
                           </div>
                           <div class="mb-3">
                              <input type="text" id="edit_last_name" name="last_name" class="form-control" required placeholder="Last Name">
                           </div>
                           <div class="mb-3">
                              <input type="email" id="edit_email" name="email" class="form-control" required placeholder="E-mail">
                           </div>
                           <div class="mb-3">
                              <input type="text" id="edit_date_of_birth" name="date_of_birth" class="form-control" required placeholder="Birth date - Type DD/MM/YYYY" maxlength="10">
                           </div>
                           <div class="mb-3">
                              <input type="text" id="edit_address" name="address" class="form-control" required placeholder="Address">
                           </div>
                           <div class="mb-3">
                              <input type="text" id="edit_state" name="state" class="form-control" required placeholder="State">
                           </div>
                           <div class="mb-3">
                              <input type="text" id="edit_city" name="city" class="form-control" required placeholder="City">
                           </div>
                           <div class="mb-3">
                              <input type="number" id="edit_zip_code" name="zip_code" class="form-control" required min="1" max="99999" oninput="limitZipCode(this)" placeholder="Zip Code">
                           </div>
                           <div class="mb-3">
                              <input type="tel" id="edit_phone_number" name="phone_number" class="form-control" required placeholder="Phone Number">
                           </div>
                           <div class="mb-3">
                              <input type="text" id="edit_insurance" name="insurance" class="form-control" required placeholder="Insurance">
                           </div>
                           <div class="mb-3">
                              <input type="text" id="edit_private_insurance" name="private_insurance" class="form-control" required placeholder="Private Insurance">
                           </div>
                           <div class="mb-3">
                              <input type="tel" id="edit_insurance_personal_number" name="insurance_personal_number" class="form-control" placeholder="Insurance Number">
                           </div>
                           <div class="mb-3">
                              <input type="text" id="edit_bill_address" name="bill_address" class="form-control" required placeholder="Billing Address">
                           </div>
                           <div class="mb-3">
                              <input type="text" id="edit_cabin" name="cabin" class="form-control" placeholder="Cabin">
                           </div>
							</form>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
							<button type="submit" class="btn btn-primary" form="editPatientForm">Update Patient</button>
						</div>
					</div>
				</div>
			</div>
			
			<!-- Bootstrap Confirmation Modal -->
			<div class="modal fade" id="confirmDeleteModal" tabindex="-1" aria-labelledby="confirmDeleteModalLabel" aria-hidden="true">
				<div class="modal-dialog modal-dialog modal-dialog-centered">
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title" id="confirmDeleteModalLabel">Confirm Delete</h5>
						</div>
						<div class="modal-body">
							Are you sure you want to delete this patient?
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">No</button>
							<button type="button" class="btn btn-danger" id="confirmDeleteButton">Yes</button>
						</div>
					</div>
				</div>
			</div>

            <!-- Patient List -->
			
			<div id="message-container" style="display: none; margin-bottom: 10px;">
			<div id="message" class="flash-message-patient"></div>
			</div>
			
            <div class="table-responsive">
               <table>
                  <thead>
                     <tr class="tr-table">
						<th>Number</th>
						<th>First Name</th>
						<th>Last Name</th>
						<th>Phone Number</th>
						<th>Insurance</th>
						<th>Private Insurance</th>
						<th>Insurance Personal Number</th>
						<th>Bill Address</th>
						<th>Cabin</th>
						<th>actions</th>
                     </tr>
                  </thead>
                  <tbody id="patientsList">
                     <% if (patients && patients.length > 0) { %>
                     <% patients.forEach(patient => { %>
                     <tr>
						<td><%= patient.id || 'N/A' %></td>
						<td><%= patient.first_name || 'N/A' %></td>
						<td><%= patient.last_name || 'N/A' %></td>
						<td><%= patient.phone_number || 'N/A' %></td>
						<td><%= patient.insurance || 'N/A' %></td>
						<td><%= patient.private_insurance || 'N/A' %></td>
						<td><%= patient.insurance_personal_number || 'N/A' %></td>
						<td><%= patient.bill_address || 'N/A' %></td>
						<td><%= patient.cabin || 'N/A' %></td>
                     </tr>
                     <% }); %>
                     <% } else { %>
                     <tr>
                        <td colspan="15" class="text-center">No patients found.</td>
                     </tr>
                     <% } %>
                  </tbody>
               </table>
            </div>
         </div>
         <!-- Clinical Documentation Section -->
         <div id="clinical-documentation-section" style="display: none;">
            <h2>Clinical Documentation</h2>
            <p>Manage clinical records, notes, and patient history.</p>
         </div>
         <!-- Billing and Invoicing Section -->
         <div id="billing-invoicing-section" style="display: none;">
            <h2>Billing and Invoicing</h2>
            <p>Manage billing information, invoices, and payment history.</p>
         </div>
         <!-- Appointment Management Section -->
         <div id="appointment-management-section" style="display: none;">
            <h2>Appointment Management</h2>
            <p>Schedule and manage patient appointments.</p>
         </div>
         <!-- Patient Communication Section -->
         <div id="patient-communication-section" style="display: none;">
            <h2>Patient Communication</h2>
            <p>Send notifications and manage communication with patients.</p>
         </div>
         <!-- Inventory Management Section -->
         <div id="inventory-management-section" style="display: none;">
            <h2>Inventory Management</h2>
            <p>Track and manage medical supplies and equipment.</p>
         </div>
         <!-- Analytics and Reporting Section -->
         <div id="analytics-reporting-section" style="display: none;">
            <h2>Analytics and Reporting</h2>
            <p>Analyze performance and generate reports.</p>
         </div>
         <!-- Compliance and Security Section -->
         <div id="compliance-security-section" style="display: none;">
            <h2>Compliance and Security</h2>
            <p>Ensure compliance with regulations and maintain security.</p>
         </div>
         <!-- Workflow Automation Section -->
         <div id="workflow-automation-section" style="display: none;">
            <h2>Workflow Automation</h2>
            <p>Automate routine tasks to improve efficiency.</p>
         </div>
         <!-- Marketing and Patient Acquisition Section -->
         <div id="marketing-patient-acquisition-section" style="display: none;">
            <h2>Marketing and Patient Acquisition</h2>
            <p>Manage marketing campaigns and patient acquisition strategies.</p>
         </div>
         <!-- Manage Users Section -->
         <div id="manage-users-section" style="display: none;">
            <h2>Manage Users</h2>
            <p>Add, edit, and manage users within the system.</p>
         </div>
      </main>
	  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
	  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
	  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
      <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
      <script src="/js/dashboard.js"></script>
   </body>
</html>